workflows:
  build:
    name: Build for draft pull request (green)
    instance_type: mac_mini
    environment:
      vars:
        FOO: BAR
    triggering:
      events:
        - pull_request
    when:
      condition: event.pull_request.draft == true
    scripts:
      - script: echo "Run for draft pull request"
        when:
          condition: event.pull_request.draft
      - script: echo "Run FOO is BAR"
        when:
          condition: env.FOO == 'BAR'
      - script: echo "Run FOO is not BAR"
        when:
          condition: env.FOO != 'BAR'
      - script: echo "Run FOO is not BAZ"
        when:
          condition: env.FOO != 'BAZ'
      - echo 'Unconditional 1'
      - script: echo 'Unconditional 2'
        when:
          changeset:
            includes:
              - codemagic.yaml
      - script: echo 'Unconditional 3'
